Jeremy Wood CSCI 4611 Assignment 6 - Harold

The purpose of this project was to create an program/game in which the user is in a world based on the book "Harold and the Purple Crayon" by Crockett Johnson. In the book, the protagonist, Harold is a 4-year-old boy who uses a purple crayon to interact with the world. He can draw things in the sky such as the moon, and draw things on the ground such as a tree. This program replicates that within a simple 3d world. The user is able to use their mouse to draw on the ground and in the sky. Objects in the sky appear to stay the same distance away as the user moves towards or away from them, since they are far away in the sky (the sun doesn't appear any closer to you if you "walk towards it" in real life). Objects on the ground do become closer/farther if you walk towards/away from them. If the user draws something on the ground, they can walk right up to it and move past it. If the user draws a line that starts and ends on the ground, it will transform into terrain such as a hill or a hole.

The method AddSkyStroke allows the user to draw in the sky by taking a 2d mesh and projecting it into 3d on the sky. This is necessary because the sky is a sphere that the user is inside, even if it appears flat. To project the 2d mesh into 3d, each vertex in the 2d mesh is iterated through and is projected to the sky sphere by using the ScreenPtHitsSky method which creates a ray from the eye through the mouse, which will intersect the sphere in some location. Where this intersects the sphere is the coordinates of the 3d vertex which will make up the new 3d mesh, projecting the stroke made by the user into the sky.


Drawing on the ground uses a similar concept with a few key differences. To draw on the ground, the stroke that the user draws must also be projected into 3d. To do this, a plane needs to be defined first to project onto. This plane is defined by a normal vector which is defined by the start and end point of the user's stroke, and the normal vector is guaranteed to face towards the camera. The stroke is then projected into 3d in a similar way to how the sky stroke was projected into 3d, except instead of using InstersectSphere to see where the projected point intersects the sphere, IntersectPlane is used to see where the projected point intersects the plane. This is done for every point and is put into a vector of 3d points called projection3d. 

To update the terrain based on the user's stroke on the ground, all the vertices of the ground mesh are looped through and their heights are adjusted based on the stroke (vertices not near the stroke will not be affected). The stroke must also start and end on the ground for the terrain to be changed. A set of equations are used to change the height of the ground based on the distance of the current point in the loop to the ground. These changes are applied by updating the ground mesh with the new vertices, which creates the new terrain.
